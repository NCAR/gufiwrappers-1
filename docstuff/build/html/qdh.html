
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>qdh &#8212; qdh  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="List files owned by a user stored in any directory under HPSS" href="gc_ex1.html" />
    <link rel="prev" title="Welcome to Query Data Holdings (qdh) documentation!" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="gc_ex1.html" title="List files owned by a user stored in any directory under HPSS"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to Query Data Holdings (qdh) documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">qdh  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">qdh</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="qdh">
<h1>qdh<a class="headerlink" href="#qdh" title="Permalink to this headline">¶</a></h1>
<p><p>Query Data holding to generate filelist, report and plots</p>
</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">qdh</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">gufitmp</span><span class="o">-</span><span class="nb">dir</span><span class="o">=</span> <span class="n">path</span><span class="o">-</span><span class="n">name</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">verbose</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">storage</span> <span class="n">project</span><span class="p">,</span><span class="n">campaign</span><span class="p">,</span><span class="n">hpss</span><span class="p">]</span>
              <span class="p">[</span><span class="o">-</span><span class="nb">list</span> <span class="n">filename</span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">owner</span><span class="p">,</span><span class="n">project</span><span class="p">,</span><span class="n">mtime</span><span class="p">,</span><span class="n">atime</span><span class="p">]</span>
              <span class="p">[</span><span class="o">-</span><span class="nb">filter</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">users</span> <span class="n">User1</span><span class="p">,</span><span class="n">User2</span> <span class="p">[</span><span class="n">User1</span><span class="p">,</span><span class="n">User2</span> <span class="o">...</span><span class="p">]]</span>
              <span class="p">[</span><span class="o">-</span><span class="nb">filter</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">projects</span> <span class="n">Project1</span><span class="p">,</span><span class="n">Project2</span> <span class="p">[</span><span class="n">Project1</span><span class="p">,</span><span class="n">Project2</span> <span class="o">...</span><span class="p">]]</span>
              <span class="p">[</span><span class="o">-</span><span class="nb">filter</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">size</span><span class="o">-</span><span class="nb">range</span><span class="o">=</span> <span class="n">LOWER</span><span class="o">-</span><span class="n">UPPER</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="nb">filter</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">write</span><span class="o">-</span><span class="n">period</span> <span class="n">YYYY</span><span class="p">[</span><span class="n">MM</span><span class="p">[</span><span class="n">DD</span><span class="p">]]</span><span class="o">-</span><span class="n">YYYY</span><span class="p">[</span><span class="n">MM</span><span class="p">[</span><span class="n">DD</span><span class="p">]]]</span>
              <span class="p">[</span><span class="o">-</span><span class="nb">filter</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">read</span><span class="o">-</span><span class="n">period</span> <span class="n">YYYY</span><span class="p">[</span><span class="n">MM</span><span class="p">[</span><span class="n">DD</span><span class="p">]]</span><span class="o">-</span><span class="n">YYYY</span><span class="p">[</span><span class="n">MM</span><span class="p">[</span><span class="n">DD</span><span class="p">]]]</span>
              <span class="p">[</span><span class="o">-</span><span class="n">report</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">users</span> <span class="o">|</span> <span class="o">-</span><span class="n">report</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">projects</span> <span class="o">|</span> <span class="o">-</span><span class="n">report</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">subdirs</span><span class="p">]</span>
              <span class="p">[</span><span class="o">-</span><span class="n">nthreads</span><span class="o">=</span> <span class="n">number</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">cores</span> <span class="ow">or</span> <span class="n">processes</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">nsbins</span> <span class="n">number</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">histogram</span> <span class="n">bins</span> <span class="p">[</span><span class="mi">8</span><span class="p">]]</span>
              <span class="p">[</span><span class="o">-</span><span class="n">directory</span> <span class="n">directory</span> <span class="n">name</span> <span class="n">to</span> <span class="n">query</span><span class="p">]</span>
</pre></div>
</div>
<section id="Named Arguments">
<h2>Named Arguments<a class="headerlink" href="#Named Arguments" title="Permalink to this headline">¶</a></h2>
<dl class="option-list">
<dt><kbd>-gufitmp-dir=, --gufitmp-dir=</kbd></dt>
<dd><p>Absolute path name to store the GUFI query output default:
/gpfs/fs1/scratch/sghosh/gufi_tmp</p>
<p>Default: “/gpfs/fs1/scratch/sghosh/gufi_tmp”</p>
</dd>
<dt><kbd>-verbose, --verbose, -v</kbd></dt>
<dd><p>Adds verbosity</p>
<p>Default: False</p>
</dd>
<dt><kbd>-storage, --storage=</kbd></dt>
<dd><p>Storage device where files are stored in.</p>
<p>Default: “project”</p>
</dd>
<dt><kbd>-list, --list=</kbd></dt>
<dd><p>Generate list of files with one or more of the attributes
from filename, size, owner, project, mtime, atime in order as
specified delimited by comma(,).</p>
</dd>
<dt><kbd>-filter-by-users, --filter-by-users=</kbd></dt>
<dd><p>Report only for User1[,User2]..</p>
</dd>
<dt><kbd>-filter-by-projects, --filter-by-projects=</kbd></dt>
<dd><p>Report only for Project1[,Project2]..</p>
</dd>
<dt><kbd>-filter-by-size-range=, --filter-by-size-range=</kbd></dt>
<dd><p>for files of size range LOWER-UPPER in bytes.
Either of LOWER or UPPER limit may be omitted for open interval. Here
is how it will be interpreted:</p>
<blockquote>
<div><ol class="arabic">
<li><p>LOWER-        =&gt; File size larger or equal to LOWER</p></li>
<li><dl class="option-list">
<dt><kbd><span class="option">-U<var>PPER</var></span></kbd></dt>
<dd><p>=&gt; File size smaller or equal to UPPER</p>
</dd>
</dl>
</li>
<li><p>LOWER         =&gt; LOWER-</p></li>
</ol>
</div></blockquote>
</dd>
<dt><kbd>-filter-by-write-period, --filter-by-write-period=</kbd></dt>
<dd><p>for content written during the time window YYYY[MM[DD]]-YYYY[MM[DD]]
either of begin or end period may be omitted for open interval. Here
is how it will be interpreted:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>YYYY[MM[DD]]- =&gt; times newer or equal to YYYY[MM[DD]]</p></li>
<li><p>-YYYY[MM[DD]]  =&gt; times older or equal to YYYY[MM[DD]]</p></li>
<li><p>YYYY[MM[DD]]  =&gt; -YYYY[MM[DD]]</p></li>
</ol>
</div></blockquote>
<p>For time specification 4-digit year is required (implies 01 month and
01 day), 2-digit month may be specified (01 day), if month is specified
2-digit day may be specified.</p>
</dd>
<dt><kbd>-filter-by-read-period, --filter-by-read-period=</kbd></dt>
<dd><p>for content read during time the window YYYY[MM[DD]]-YYYY[MM[DD]]
either of begin or end period may be omitted for open interval. Here
is how it will be interpreted:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>YYYY[MM[DD]]- =&gt; times newer or equal to YYYY[MM[DD]]</p></li>
<li><p>-YYYY[MM[DD]]  =&gt; times older or equal to YYYY[MM[DD]]</p></li>
<li><p>YYYY[MM[DD]]  =&gt; -YYYY[MM[DD]]</p></li>
</ol>
</div></blockquote>
<p>For time specification 4-digit year is required (implies 01 month and
01 day), 2-digit month may be specified (01 day), if month is specified
2-digit day may be specified.</p>
</dd>
<dt><kbd>-report-by-users, --report-by-users</kbd></dt>
<dd><p>report by user-name / user-ids (if mapping not found)</p>
<p>Default: False</p>
</dd>
<dt><kbd>-report-by-projects, --report-by-projects</kbd></dt>
<dd><p>report by project-name / project-id (if mapping not found) HPSS only</p>
<p>Default: False</p>
</dd>
<dt><kbd>-report-by-subdirs, --report-by-subdirs</kbd></dt>
<dd><p>report by subdirectories of this parent directory</p>
<p>Default: False</p>
</dd>
<dt><kbd>-nthreads=, --nthreads=</kbd></dt>
<dd><p>Number of cores / threads to run</p>
<p>Default: 40</p>
</dd>
<dt><kbd>-nsbins, --nsbins=</kbd></dt>
<dd><p>Number of write / read stat histogram bins in report</p>
<p>Default: 8</p>
</dd>
<dt><kbd>-directory, --directory=</kbd></dt>
<dd><p>Absolute path of the filesystem tree located either in glade, campaign or HPSS</p>
</dd>
</dl>
</section>
<p>This program generates the raw files querying GUFI-DB, for further
processing by grprt. Optionally it generates the file lists if the
–list option is added.  The raw files are stored under</p>
<p>&lt;gufitmp&gt;/&lt;absolute-path-name-of-parent&gt;/&lt;directory-name&gt;.dat.&lt;thread-id&gt;</p>
<p>and are in CSV format with 0x1E character as delimiter chosen to allow
for all legal characters in filename and directory names. These raw
files are not meant to be human readable.</p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gc_ex1.html">List files owned by a user stored in any directory under HPSS</a></li>
<li class="toctree-l1"><a class="reference internal" href="gc_ex2.html">List files owned by a user and written between year 2010 and 2015</a></li>
</ul>
<title>Options Form</title>
  <script>
    function generateCommand() {
      // Retrieve the user inputs from the form
      var gufitmpDir = document.getElementById("gufitmp-dir").value;
      var verbose = document.getElementById("verbose").checked ? "True" : "False";
      var storage = document.getElementById("storage").value;
      var list = document.getElementById("list").value;
      var filterByUsers = document.getElementById("filter-by-users").value;
      var filterByProjects = document.getElementById("filter-by-projects").value;
      var filterBySizeRange = document.getElementById("filter-by-size-range").value;
      var filterByWritePeriod = document.getElementById("filter-by-write-period").value;
      var filterByReadPeriod = document.getElementById("filter-by-read-period").value;
      // Generate the command using the user inputs
      var command = `qdh.py --gufitmp-dir=${gufitmpDir} --verbose=${verbose} --storage=${storage} --list=${list} --filter-by-users=${filterByUsers} --filter-by-projects=${filterByProjects} --filter-by-size-range=${filterBySizeRange} --filter-by-write-period=${filterByWritePeriod} --filter-by-read-period=${filterByReadPeriod}`;
      // Display the generated command
      document.getElementById("generated-command").innerHTML = "Generated Command: " + command;
    }
  </script>
  <h2>qdh helper</h2>
  <p>This helper will allow you to copy and paste your requested GUFI command into your terminal.</p>
  <label for="gufitmp-dir">GUFI TMP Directory:</label>
  <input type="text" id="gufitmp-dir" value="/gpfs/fs1/scratch/sghosh/gufi_tmp"><br><br>

  <label for="verbose">Verbose:</label>
  <input type="checkbox" id="verbose"><br><br>

  <label for="storage">Storage:</label>
  <select id="storage">
    <option value="project">Project</option>
    <option value="hpss">HPSS</option>
  </select><br><br>

  <label for="list">List:</label>
  <input type="text" id="list"><br><br>

  <label for="filter-by-users">Filter by Users:</label>
  <input type="text" id="filter-by-users"><br><br>

  <label for="filter-by-projects">Filter by Projects:</label>
  <input type="text" id="filter-by-projects"><br><br>

  <label for="filter-by-size-range">Filter by Size Range:</label>
  <input type="text" id="filter-by-size-range"><br><br>

  <label for="filter-by-write-period">Filter by Write Period:</label>
  <input type="text" id="filter-by-write-period"><br><br>

  <label for="filter-by-read-period">Filter by Read Period:</label>
  <input type="text" id="filter-by-read-period"><br><br>

  <button onclick="generateCommand()">Generate Command</button>
  
  <p id="generated-command"></p>
</div>
<section id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
<p>The <strong>qdh</strong> github page is <a class="reference external" href="https://www.github.com/NCAR/gufiwrappers">here</a>.
Please post any bugs, feedbacks, comments or feature requests
<a class="reference external" href="https://github.com/NCAR/gufiwrappers/issues">here</a> or just send an email to
<a class="reference external" href="mailto:sghosh">me</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">qdh</a><ul>
<li><a class="reference internal" href="#Named Arguments">Named Arguments</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to Query Data Holdings (qdh) documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gc_ex1.html"
                        title="next chapter">List files owned by a user stored in any directory under HPSS</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/qdh.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="gc_ex1.html" title="List files owned by a user stored in any directory under HPSS"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to Query Data Holdings (qdh) documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">qdh  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">qdh</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Sidd.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.1.
    </div>
  </body>
</html>